<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/starter::head(~{this::title},_,_)">
    <title>origin | 用户管理</title>
</head>
<body th:replace="fragments/starter::body(~{this::#content-title}, ~{this::#content}, ~{this::script})">
<div id="content-title">
    用户管理
</div>
<div id="content">
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form id="register_form" role="form" action="#" th:action="@{/register}" method="post">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">新增用户</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="username">用户名</label>
                            <input type="text" class="form-control" id="username" name="username">
                        </div>
                        <div class="form-group">
                            <label for="password">密码</label>
                            <input type="password" id="password" name="password" class="form-control">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="register" type="button" class="btn btn-primary">保存</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <a href="#" class="btn btn-primary btn-block margin-bottom" data-toggle="modal" data-target="#myModal">新增用户</a>
        <div class="box box-solid">
            <div class="box-body no-padding">
                <ul class="nav nav-pills nav-stacked">
                    <li class="active"><a href="#" th:src="@{/auth/users}"><i class="fa fa-inbox"></i> 用户查看 </a></li>
                    <li><a href="#" th:src="@{/auth/users}"><i class="fa fa-inbox"></i> 用户组管理 </a></li>
                </ul>
            </div>
            <!-- /.box-body -->
        </div>
    </div>
    <div class="col-md-9">
        <div class="box box-solid">
            <div class="box-header with-border">
                <h3 class="box-title">用户列表</h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">
                <table class="table table-striped" data-toggle="table">
                    <tr data-toggle="table-head">
                        <th style="width: 10px">#</th>
                        <th>用户名</th>
                        <th style="width: 165px"></th>
                    </tr>
                    <!--/*@thymesVar id="users" type="java.util.List"*/-->
                    <tr th:each="user,iterStat:${users}">
                        <td th:text="${iterStat.count}">1.</td>
                        <!--suppress ThymeleafVariablesResolveInspection -->
                        <td th:text="${user.username}"></td>
                        <td><a class="badge bg-blue">编辑</a> <a class="badge bg-blue">重置密码</a> <a class="badge bg-red rm">删除</a></td>
                    </tr>
                </table>
            </div>
            <!-- /.box-body -->
        </div>
        <nav aria-label="page" style="overflow: hidden; zoom:1;">
            <ul class="pagination no-margin pull-right">
                <li class="disabled"><a href="#" aria-label="Previous"><span aria-hidden="true">上一页</span></a></li>
                <!--/*@thymesVar id="users" type="java.util.Iterator"*/-->
                <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
                <!--<li><a href="#">2 <span class="sr-only">(current)</span></a></li>-->
                <!--<li><a href="#">3 <span class="sr-only">(current)</span></a></li>-->
                <!--<li><a href="#">4 <span class="sr-only">(current)</span></a></li>-->
                <!--<li><a href="#">5 <span class="sr-only">(current)</span></a></li>-->
                <li class="disabled"><a href="#" aria-label="next"><span>下一页</span></a></li>
            </ul>
        </nav>
    </div>
</div>
<script th:inline="javascript">
    $(function () {
        $('#register').click(function () {
            $.ajax({
                type: 'post',
                url: /*[[@{/register}]]*/ '',
                data: $('#register_form').serialize(),
                success: function () {
                    toastr.success('成功新增用户！');
                    $('#myModal').modal('hide');
                },
                error: function (e) {
                    debugger;
                    toastr.error('处理失败！' + e.responseJSON.message);
                }
            });
        });
        $('.rm').click(function () {
            bootbox.confirm('是否删除', function () {

            });
        });
    });


    function loadData () {
        $table = $('[data-toggle="table"]');
        $('tr:gt(0)', $table).remove();

    }
</script>
</body>
</html>